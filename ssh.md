# Команды SSH

## Как настроить SSH подключение?

Переходим в корневой каталог юзера
```
cd ~
```

Создаем скрытый каталог .ssh (если отсутствует)
```
mkdir .ssh
```

Меняем права доступап к папке юзера, чтобы только он имел к ней доступ
```
chmod 700 .ssh
```

Создаем файл внутри папки .ssh
```
touch .ssh/authorized_keys
```

Меняем разрешение для файла только владелец читает/записывает
```
chmod 600 .ssh/authorized_keys
```

Переходим на локальную машину, копируем публичный ключ
```
cat ~/.ssh/id_rsa.pub
```

Возвращаемся на сервер, открываем файл authorized_keys и вставляем скопированный SHA ключ
```
vim .ssh/authorized_keys 
```

Проверяем соединение
```
shh user@111.111.111.111
```

## После переустановки MacOS

Посмотреть лист доступных публичных ключей на маке
```
ls ~/.ssh/*.pub
```

Посмотреть непосредственно ключи
```
cat ~/.ssh/id_rsa.pub or cat ~/.ssh/id_dsa.pub
```

После переустановки ОС нужно создать файл в каталоге `.ssh` под именем `id_rsa`, чтобы заходить на сервер
```
cd user_home_folder
cd .ssh
touch id_rsa
```

Cкопировать содержимое с резервного ключа в файл id_rsa
```
cp file.txt newfile.txt
```

Установить разрешение на файл
```
chmod 400 ~/.ssh/id_rsa
```
Готово! Можно заходить на сервер











